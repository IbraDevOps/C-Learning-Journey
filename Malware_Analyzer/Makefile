CC ?= gcc
CFLAGS ?= -std=c11 -Wall -Wextra -Werror -O2 -fstack-protector-strong -D_FORTIFY_SOURCE=2
PKGS = openssl
CFLAGS += $(shell pkg-config --cflags $(PKGS) 2>/dev/null)
LDLIBS += $(shell pkg-config --libs $(PKGS) 2>/dev/null)

SRC := src/main.c src/elf_parser.c src/utils.c src/report.c
INC := -Iinclude
BIN := malx

all: $(BIN)
$(BIN): $(SRC)
	$(CC) $(CFLAGS) $(INC) $^ $(LDLIBS) -o $@

clean:
	rm -f $(BIN) *.o
